<!doctype html><html lang=en-us><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-158845844-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-158845844-1');</script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery-cookiebar/1.0.5/jquery.cookiebar.min.js></script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/jquery-cookiebar/1.0.5/jquery.cookiebar.css><script type=text/javascript>$(document).ready(function(){$.cookieBar({fixed:true,acceptOnScroll:600,policyURL:'/privacy-policy/',policyButton:true,policyText:'Privacy Policy',expireDays:45});});</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css integrity=sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js integrity=sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js integrity=sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI crossorigin=anonymous onload=renderMathInElement(document.body);></script><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Linux UIO driver to handle with IRQ source.</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Linux UIO driver to handle with external IRQ."><link href="https://fonts.googleapis.com/css?family=Open+Sans" rel=stylesheet><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.1/css/bulma.min.css><link rel=stylesheet href=https://yairgd.github.io/css/blog.css></head><body><nav class="navbar is-fixed-top" role=navigation aria-label="main navigation"><div class=navbar-brand><a class=navbar-item href=https://yairgd.github.io/>Home</a>
<a class=navbar-item href=/pages/about>About</a>
<a class=navbar-item href=/blog>Blog</a>
<a class=navbar-item href=/pages/cv>CV</a>
<a class=navbar-item href=/projects>Projects</a>
<a class=navbar-item href=/pages/search>Search</a></div></nav><section class="hero is-info is-medium"><div class=hero-body style=background-image:url(https://yairgd.github.io/img/bg-blog1.jpg)><div class="container has-text-centered"><br><h1 class="title is-size-1">Linux UIO driver to handle with IRQ source.</h1></div></div></section><div class=container><div class=section><div class=columns><div class="column is-9"><div class="tile is-child box"><div class=content><article class=media><div class=media-content><div class=content><p class="title is-5"><a href=https://yairgd.github.io/2020/02/linux-uio-driver-to-handle-with-irq-source./>Linux UIO driver to handle with IRQ source.</a></p><p class="subtitle is-size-6 has-text-grey-light">Published at February 24, 2020 &#183;
<i class="far fa-clock"></i>&nbsp;6 min read
&#183; Tags:
<a href=https://yairgd.github.io/tags/linux/>linux</a>
<a href=https://yairgd.github.io/tags/kernel/>kernel</a>
<a href=https://yairgd.github.io/tags/rt/>rt</a></p></br></div></div></article><p>The Userspace I/O framework (UIO) is part of the Linux kernel and allows device drivers to be written almost entirely in userspace. UIO is suitable for hardware that does not fit into other kernel subsystems (Like special HW like FPGA) and allowing the programmer to write most of the driver in userspace using all standard application programming tools and libraries. This greatly simplifies the development, maintenance, and distribution of device drivers for this kind of hardware. I did a simple project implemented on Xilinx Zynq that shows a response to IRQ that comes from a periodic time that is implemented on the FPGA part of the Zynq. The PL side (ARM) responds to the IRQ at user space and allows a rapid periodic response to IRQ.</p><h2 id=fpga-design>FPGA design</h2><p>Here is a simple FPGA project made on Vivado. It has an ARM processor, GPIO, and Fixed interval timer (FIT). The user can enable or disable the FIT by setting the correct bit in the GPIO register.<figure><img src=/post/linux_uio_device_irq/uiofpga_block_design.png><figcaption><h4>The Block Design</h4></figcaption></figure></p><p>The IRQ output of the FIT is is connected to the ARM interrupt at IRQ_F2P[0]<figure><img src=/post/linux_uio_device_irq/irq_definition.png><figcaption><h4>IRQ Selection</h4></figcaption></figure></p><h2 id=the-driver-code>The driver code</h2><p>here is the driver code:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=color:#75715e>#</span><span style=color:#75715e>include</span> <span style=color:#75715e>&lt;linux/module.h&gt;</span><span style=color:#75715e>
</span><span style=color:#75715e></span><span style=color:#75715e>#</span><span style=color:#75715e>include</span> <span style=color:#75715e>&lt;linux/slab.h&gt;</span><span style=color:#75715e>
</span><span style=color:#75715e></span><span style=color:#75715e>#</span><span style=color:#75715e>include</span> <span style=color:#75715e>&lt;linux/device.h&gt;</span><span style=color:#75715e>
</span><span style=color:#75715e></span><span style=color:#75715e>#</span><span style=color:#75715e>include</span> <span style=color:#75715e>&lt;linux/uio_driver.h&gt;</span><span style=color:#75715e>
</span><span style=color:#75715e></span><span style=color:#75715e>#</span><span style=color:#75715e>include</span> <span style=color:#75715e>&lt;linux/interrupt.h&gt;</span><span style=color:#75715e>
</span><span style=color:#75715e></span><span style=color:#75715e>#</span><span style=color:#75715e>include</span> <span style=color:#75715e>&lt;linux/of_address.h&gt;</span><span style=color:#75715e>
</span><span style=color:#75715e></span><span style=color:#75715e>#</span><span style=color:#75715e>include</span> <span style=color:#75715e>&lt;linux/of_irq.h&gt;</span><span style=color:#75715e>
</span><span style=color:#75715e></span><span style=color:#75715e>#</span><span style=color:#75715e>include</span> <span style=color:#75715e>&lt;linux/of_platform.h&gt; </span><span style=color:#75715e>
</span><span style=color:#75715e></span>
<span style=color:#66d9ef>static</span> <span style=color:#66d9ef>struct</span> uio_info <span style=color:#f92672>*</span>info;
<span style=color:#66d9ef>static</span> <span style=color:#66d9ef>struct</span> device <span style=color:#f92672>*</span>dev;
<span style=color:#66d9ef>static</span> <span style=color:#66d9ef>int</span> irq <span style=color:#f92672>=</span> <span style=color:#ae81ff>6</span>;
module_param(irq, <span style=color:#66d9ef>int</span>, S_IRUGO);

<span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>my_release</span>(<span style=color:#66d9ef>struct</span> device <span style=color:#f92672>*</span>dev)
{
	pr_info(<span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>releasing my uio device</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>);
}

<span style=color:#66d9ef>static</span> irqreturn_t <span style=color:#a6e22e>my_handler</span>(<span style=color:#66d9ef>int</span> irq, <span style=color:#66d9ef>struct</span> uio_info <span style=color:#f92672>*</span>dev_info)
{
<span style=color:#75715e>//	static int count = 0;
</span><span style=color:#75715e></span><span style=color:#75715e>//	pr_info(&#34;In UIO handler, count=%d\n&#34;, ++count);
</span><span style=color:#75715e></span>	<span style=color:#66d9ef>return</span> IRQ_HANDLED;
}

<span style=color:#75715e>#</span><span style=color:#75715e>define DEVNAME &#34;fpga-belkin&#34;</span><span style=color:#75715e>
</span><span style=color:#75715e></span><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>int</span> __init <span style=color:#a6e22e>my_init</span>(<span style=color:#66d9ef>void</span>)
{
	<span style=color:#66d9ef>struct</span> device_node <span style=color:#f92672>*</span> np <span style=color:#f92672>=</span> NULL;
	
	<span style=color:#75715e>/* set IRQ */</span>
	np <span style=color:#f92672>=</span> of_find_compatible_node(NULL,NULL,DEVNAME);
	<span style=color:#66d9ef>if</span> (np <span style=color:#f92672>=</span><span style=color:#f92672>=</span> NULL)
	{
		printk (KERN_INFO <span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>node %s is not defined in DTS</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>,DEVNAME );

		<span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
	}
	irq  <span style=color:#f92672>=</span> irq_of_parse_and_map(np, <span style=color:#ae81ff>0</span>); <span style=color:#75715e>/* get IRQ # from device tree */</span>


	dev <span style=color:#f92672>=</span> kzalloc(<span style=color:#66d9ef>sizeof</span>(<span style=color:#66d9ef>struct</span> device), GFP_KERNEL);
	
	
	dev_set_name(dev,DEVNAME);
	dev<span style=color:#f92672>-</span><span style=color:#f92672>&gt;</span>release <span style=color:#f92672>=</span> my_release;
<span style=color:#75715e>#</span><span style=color:#75715e>pragma GCC diagnostic push</span><span style=color:#75715e>
</span><span style=color:#75715e></span><span style=color:#75715e>#</span><span style=color:#75715e>pragma GCC diagnostic ignored &#34;-Wunused-result&#34; </span><span style=color:#75715e>
</span><span style=color:#75715e></span>	(<span style=color:#66d9ef>void</span>)device_register(dev);
<span style=color:#75715e>#</span><span style=color:#75715e>pragma GCC diagnostic pop </span><span style=color:#75715e>
</span><span style=color:#75715e></span>
	info <span style=color:#f92672>=</span> kzalloc(<span style=color:#66d9ef>sizeof</span>(<span style=color:#66d9ef>struct</span> uio_info), GFP_KERNEL);
	info<span style=color:#f92672>-</span><span style=color:#f92672>&gt;</span>name <span style=color:#f92672>=</span> DEVNAME;
	info<span style=color:#f92672>-</span><span style=color:#f92672>&gt;</span>version <span style=color:#f92672>=</span> <span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>0.0.1</span><span style=color:#e6db74>&#34;</span>;
	info<span style=color:#f92672>-</span><span style=color:#f92672>&gt;</span>irq <span style=color:#f92672>=</span> irq;
	info<span style=color:#f92672>-</span><span style=color:#f92672>&gt;</span>irq_flags <span style=color:#f92672>=</span> IRQF_SHARED;
	info<span style=color:#f92672>-</span><span style=color:#f92672>&gt;</span>handler <span style=color:#f92672>=</span> my_handler;



	<span style=color:#66d9ef>if</span> (uio_register_device(dev, info) <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span>) {
		device_unregister(dev);
		kfree(dev);
		kfree(info);
		pr_info(<span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Failing to register uio device</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>);
		<span style=color:#66d9ef>return</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>;
	}
	
	pr_info(<span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Registered UIO handler for IRQ=%d</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, irq);
	<span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
}

<span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> __exit <span style=color:#a6e22e>my_exit</span>(<span style=color:#66d9ef>void</span>)
{
	uio_unregister_device(info);
	device_unregister(dev);
	pr_info(<span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Un-Registered UIO handler for IRQ=%d</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, irq);
	kfree(info);
	kfree(dev);
}

module_init(my_init);
module_exit(my_exit);

MODULE_AUTHOR(<span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Yair Gadelov</span><span style=color:#e6db74>&#34;</span>);
MODULE_DESCRIPTION(<span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>axi gpio for zynq</span><span style=color:#e6db74>&#34;</span>);
MODULE_LICENSE(<span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>GPL v2</span><span style=color:#e6db74>&#34;</span>);
</code></pre></div><p>makefile to build:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-make data-lang=make>obj-m <span style=color:#f92672>:=</span> uiofpga.o

SRC <span style=color:#f92672>:=</span> <span style=color:#66d9ef>$(</span>shell pwd<span style=color:#66d9ef>)</span>

<span style=color:#a6e22e>all</span><span style=color:#f92672>:</span>
	<span style=color:#66d9ef>$(</span>MAKE<span style=color:#66d9ef>)</span> -C <span style=color:#66d9ef>$(</span>KERNEL_SRC<span style=color:#66d9ef>)</span> M<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>SRC<span style=color:#66d9ef>)</span>

<span style=color:#a6e22e>modules_install</span><span style=color:#f92672>:</span>
	<span style=color:#66d9ef>$(</span>MAKE<span style=color:#66d9ef>)</span> -C <span style=color:#66d9ef>$(</span>KERNEL_SRC<span style=color:#66d9ef>)</span> M<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>SRC<span style=color:#66d9ef>)</span> modules_install

<span style=color:#a6e22e>clean</span><span style=color:#f92672>:</span>
	rm -f *.o *~ core .depend .*.cmd *.ko *.mod.c
	rm -f Module.markers Module.symvers modules.order
	rm -rf .tmp_versions Modules.symvers
</code></pre></div><h2 id=the-device-tree>The device tree</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>/ <span style=color:#f92672>{</span>
	...

	fit_uio:fit  <span style=color:#f92672>{</span>
		status <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;okay&#34;</span>;
		compatible <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;fix-interval-timer-irq&#34;</span>;
		interrupt-parent <span style=color:#f92672>=</span> &lt;&amp;intc&gt;;
                interrupts <span style=color:#f92672>=</span> &lt;<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>29</span> 1&gt;;
	<span style=color:#f92672>}</span>;

	...
<span style=color:#f92672>}</span>

</code></pre></div><p>Here is what the three numbers assigned to â€œinterrupt&rdquo; means:</p><ul><li><p>The first value is a flag indicating if the interrupt is an SPI (shared peripheral interrupt). A nonzero value means it is an SPI.</p></li><li><p>The second number relates to the IRQ number. For Shared Peripheral interrupts, the value in the device tree is the (IRQ - 32), e.g., subtract 32 from the 61 number. See Chapter 7, table 7.4 of the Zynq tech ref manual (ug-585) to understand the interrupt numbers. I guess it because the first bit of SPI ( Shared Peripheral Interrupts) is mapped to IRQ 32. I mapped the FIT to 61 (32+29) - The first bit among the 16 bits of the shared interrupt port from the PL. Here is a quote from UG-585 P. 229:</p></li></ul><blockquote><p>A group of approximately 60 interrupts from various modules can be routed to one or both of the
CPUs or the PL. The interrupt controller manages the prioritization and reception of these interrupts for the CPUs.
Except for IRQ #61 through #68 and #84 through #91, all interrupt sensitivity types are fixed by the
requesting sources and cannot be changed. The GIC must be programmed to accommodate this. The
boot ROM does not program these registers; therefore, the SDK device drivers must program the GIC
to accommodate these sensitivity types.</p></blockquote><ul><li>The third number is the IRQ type:<br>1 = low-to-high edge triggered<br>2 = high-to-low edge triggered<br>4 = active high level-sensitive<br>8 = active low level-sensitive</li></ul><h2 id=simple-test-application>simple test application:</h2><p>Here is a demo of how to receive and respond to interrupts from the FIT in userspace. I have configured the FIT to interrupt every 61 microseconds, and most of the time, it defiantly looks accurate.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash> 61.000000   61.000000   61.000000   61.000000   63.000000   60.000000   61.000000   60.000000   61.000000   88.000000   37.000000   60.000000   60.000000   61.000000   61.000000   61.000000   62.000000   60.000000   61.000000   61.000000   61.000000   63.000000   60.000000   61.000000   60.000000   61.000000   61.000000   61.000000   61.000000   62.000000   61.000000   61.000000   61.000000   60.000000   62.000000   60.000000   62.000000   61.000000   63.000000   59.000000   61.000000   61.000000   61.000000   61.000000   61.000000   61.000000   61.000000   61.000000   61.000000   61.000000   61.000000   61.000000   61.000000   61.000000   62.000000   62.000000   60.000000   60.000000   62.000000   63.000000   59.000000
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=color:#66d9ef>int</span> fd;
<span style=color:#66d9ef>int</span> <span style=color:#a6e22e>trigger_init</span>(<span style=color:#66d9ef>void</span>)
{

	fd<span style=color:#f92672>=</span>open(<span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>/dev/uio0</span><span style=color:#e6db74>&#34;</span>,O_RDONLY);
	<span style=color:#66d9ef>if</span> (fd<span style=color:#f92672>&lt;</span><span style=color:#ae81ff>0</span>) {
		<span style=color:#66d9ef>return</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>;
	}

	<span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
}
<span style=color:#66d9ef>int</span> <span style=color:#a6e22e>trigger_poll</span>(<span style=color:#66d9ef>void</span>)
{
	<span style=color:#66d9ef>int</span> info <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>,nb; <span style=color:#75715e>/* unmask */</span>

	<span style=color:#66d9ef>struct</span> pollfd fds <span style=color:#f92672>=</span> {
            .fd <span style=color:#f92672>=</span> fd,
            .events <span style=color:#f92672>=</span> POLLIN,
        };

        <span style=color:#66d9ef>int</span> ret <span style=color:#f92672>=</span> poll(<span style=color:#f92672>&amp;</span>fds, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>100</span>);

	<span style=color:#66d9ef>if</span> (ret <span style=color:#f92672>&gt;</span><span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>) {
            nb <span style=color:#f92672>=</span> read(fd, <span style=color:#f92672>&amp;</span>info, <span style=color:#66d9ef>sizeof</span>(info));
            <span style=color:#66d9ef>if</span> (<span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;</span><span style=color:#f92672>&amp;</span> nb <span style=color:#f92672>=</span><span style=color:#f92672>=</span> (ssize_t)<span style=color:#66d9ef>sizeof</span>(info)) {
                <span style=color:#75715e>/* Do something in response to the interrupt. */</span>
                printf(<span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Interrupt #%u!</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, info);
            }
        } <span style=color:#66d9ef>else</span> {
	    info <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>;
            close(fd);
        }


	<span style=color:#66d9ef>return</span> info;

}
</code></pre></div><p>The number of interrupt occurrence can be displayed by typing <em>cat /proc/interrupts</em></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>           CPU0       CPU1       
 16:          <span style=color:#ae81ff>1</span>          <span style=color:#ae81ff>0</span>     GIC-0  <span style=color:#ae81ff>27</span> Edge      gt
 17:          <span style=color:#ae81ff>0</span>          <span style=color:#ae81ff>0</span>     GIC-0  <span style=color:#ae81ff>43</span> Level     ttc_clockevent
 18:     <span style=color:#ae81ff>617543</span>     <span style=color:#ae81ff>758201</span>     GIC-0  <span style=color:#ae81ff>29</span> Edge      twd
 19:          <span style=color:#ae81ff>0</span>          <span style=color:#ae81ff>0</span>     GIC-0  <span style=color:#ae81ff>37</span> Level     arm-pmu
 20:          <span style=color:#ae81ff>0</span>          <span style=color:#ae81ff>0</span>     GIC-0  <span style=color:#ae81ff>38</span> Level     arm-pmu
 21:         <span style=color:#ae81ff>43</span>          <span style=color:#ae81ff>0</span>     GIC-0  <span style=color:#ae81ff>39</span> Level     f8007100.adc
 24:          <span style=color:#ae81ff>0</span>          <span style=color:#ae81ff>0</span>     GIC-0  <span style=color:#ae81ff>35</span> Level     f800c000.ocmc
 25:        <span style=color:#ae81ff>397</span>          <span style=color:#ae81ff>0</span>     GIC-0  <span style=color:#ae81ff>82</span> Level     xuartps
 26:     <span style=color:#ae81ff>397868</span>          <span style=color:#ae81ff>0</span>     GIC-0  <span style=color:#ae81ff>54</span> Level     eth0
 27:          <span style=color:#ae81ff>0</span>          <span style=color:#ae81ff>0</span>     GIC-0  <span style=color:#ae81ff>45</span> Level     f8003000.dmac
 28:          <span style=color:#ae81ff>0</span>          <span style=color:#ae81ff>0</span>     GIC-0  <span style=color:#ae81ff>46</span> Level     f8003000.dmac
 29:          <span style=color:#ae81ff>0</span>          <span style=color:#ae81ff>0</span>     GIC-0  <span style=color:#ae81ff>47</span> Level     f8003000.dmac
 30:          <span style=color:#ae81ff>0</span>          <span style=color:#ae81ff>0</span>     GIC-0  <span style=color:#ae81ff>48</span> Level     f8003000.dmac
 31:          <span style=color:#ae81ff>0</span>          <span style=color:#ae81ff>0</span>     GIC-0  <span style=color:#ae81ff>49</span> Level     f8003000.dmac
 32:          <span style=color:#ae81ff>0</span>          <span style=color:#ae81ff>0</span>     GIC-0  <span style=color:#ae81ff>72</span> Level     f8003000.dmac
 33:          <span style=color:#ae81ff>0</span>          <span style=color:#ae81ff>0</span>     GIC-0  <span style=color:#ae81ff>73</span> Level     f8003000.dmac
 34:          <span style=color:#ae81ff>0</span>          <span style=color:#ae81ff>0</span>     GIC-0  <span style=color:#ae81ff>74</span> Level     f8003000.dmac
 35:          <span style=color:#ae81ff>0</span>          <span style=color:#ae81ff>0</span>     GIC-0  <span style=color:#ae81ff>75</span> Level     f8003000.dmac
 36:          <span style=color:#ae81ff>0</span>          <span style=color:#ae81ff>0</span>     GIC-0  <span style=color:#ae81ff>40</span> Level     f8007000.devcfg
 42:          <span style=color:#ae81ff>0</span>          <span style=color:#ae81ff>0</span>     GIC-0  <span style=color:#ae81ff>41</span> Edge      f8005000.watchdog
 43:    <span style=color:#ae81ff>3478435</span>          <span style=color:#ae81ff>0</span>     GIC-0  <span style=color:#ae81ff>61</span> Edge      fix-intervel-timer-irq   &lt;-- The number of FIT interrupts occurances
</code></pre></div><h2 id=references>References</h2><p><a href=https://www.kernel.org/doc/html/v4.13/driver-api/uio-howto.html>[1] https://www.kernel.org/doc/html/v4.13/driver-api/uio-howto.html</a><br><a href=http://fpga.org/2013/05/28/how-to-design-and-access-a-memory-mapped-device-part-two>[2] http://fpga.org/2013/05/28/how-to-design-and-access-a-memory-mapped-device-part-two</a><br><a href=https://elinux.org/images/b/b0/Uio080417celfelc08.pdf>[3] https://elinux.org/images/b/b0/Uio080417celfelc08.pdf</a><br><a href=https://www.osadl.org/fileadmin/dam/rtlws/12/Koch.pdf>[4] https://www.osadl.org/fileadmin/dam/rtlws/12/Koch.pdf</a><br><a href=https://www.kernel.org/doc/html/v4.14/driver-api/uio-howto.html>[5] https://www.kernel.org/doc/html/v4.14/driver-api/uio-howto.html</a><br><a href=https://www.xilinx.com/support/answers/62363.html>[6] https://www.xilinx.com/support/answers/62363.html</a><br><a href=https://yurovsky.github.io/2014/10/10/linux-uio-gpio-interrupt.html>[7] https://yurovsky.github.io/2014/10/10/linux-uio-gpio-interrupt.html</a><br><a href=https://www.slideshare.net/chrissimmonds/quick-and-easy-device-drivers-for-embedded-linux-using-uio>[8] https://www.slideshare.net/chrissimmonds/quick-and-easy-device-drivers-for-embedded-linux-using-uio</a></p></div><div class=content><div class=disqus-comments>Comments<div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"yairgd-github-io-1"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></div></div><div class="column is-3"><div class=card><div class=card-content><h1 class="title is-5">Categories</h1><div class=tags><span class=tag><a href=https://yairgd.github.io/categories/algorithm>algorithm</a></span>
<span class=tag><a href=https://yairgd.github.io/categories/development>development</a></span>
<span class=tag><a href=https://yairgd.github.io/categories/embedded>embedded</a></span>
<span class=tag><a href=https://yairgd.github.io/categories/golang>golang</a></span>
<span class=tag><a href=https://yairgd.github.io/categories/linux>linux</a></span>
<span class=tag><a href=https://yairgd.github.io/categories/python>python</a></span>
<span class=tag><a href=https://yairgd.github.io/categories/qt5>qt5</a></span></div></div></div><br><div class=card><div class=card-content><h1 class="title is-5">Tags</h1><div class=tags><span class=tag><a href=https://yairgd.github.io/tags/bayer>bayer</a></span>
<span class=tag><a href=https://yairgd.github.io/tags/computer-vision>computer-vision</a></span>
<span class=tag><a href=https://yairgd.github.io/tags/cypress.>cypress.</a></span>
<span class=tag><a href=https://yairgd.github.io/tags/development>development</a></span>
<span class=tag><a href=https://yairgd.github.io/tags/eclipse>eclipse</a></span>
<span class=tag><a href=https://yairgd.github.io/tags/embedded>embedded</a></span>
<span class=tag><a href=https://yairgd.github.io/tags/go>go</a></span>
<span class=tag><a href=https://yairgd.github.io/tags/golang>golang</a></span>
<span class=tag><a href=https://yairgd.github.io/tags/hugo>hugo</a></span>
<span class=tag><a href=https://yairgd.github.io/tags/kalman-filter>kalman-filter</a></span>
<span class=tag><a href=https://yairgd.github.io/tags/kernel>kernel</a></span>
<span class=tag><a href=https://yairgd.github.io/tags/linux>linux</a></span>
<span class=tag><a href=https://yairgd.github.io/tags/openocd>openocd</a></span>
<span class=tag><a href=https://yairgd.github.io/tags/opkg>opkg</a></span>
<span class=tag><a href=https://yairgd.github.io/tags/qt5>qt5</a></span>
<span class=tag><a href=https://yairgd.github.io/tags/rgb>rgb</a></span>
<span class=tag><a href=https://yairgd.github.io/tags/rt>rt</a></span>
<span class=tag><a href=https://yairgd.github.io/tags/statstical-abitrage>statstical-abitrage</a></span>
<span class=tag><a href=https://yairgd.github.io/tags/stm32>stm32</a></span>
<span class=tag><a href=https://yairgd.github.io/tags/templates>templates</a></span>
<span class=tag><a href=https://yairgd.github.io/tags/themes>themes</a></span>
<span class=tag><a href=https://yairgd.github.io/tags/yocto>yocto</a></span>
<span class=tag><a href=https://yairgd.github.io/tags/zynq>zynq</a></span></div></div></div><br><div class=card><div class=card-content><h1 class="title is-5">Recent posts</h1><h1><a href=https://yairgd.github.io/2020/11/debugging-of-cypress-psoc6-in-linux-terminal./>Debugging of cypress psoc6 in Linux terminal.</a></h1><time class="has-text-grey-light is-size-7">5 November 2020</time><h1><a href=https://yairgd.github.io/2020/10/simple-openamp-application-for-stm32mp157/>Simple OpenAMP application for stm32mp157</a></h1><time class="has-text-grey-light is-size-7">25 October 2020</time><h1><a href=https://yairgd.github.io/2020/10/compile-linux-kernel-for-zynq/>Compile Linux kernel for zynq</a></h1><time class="has-text-grey-light is-size-7">17 October 2020</time><h1><a href=https://yairgd.github.io/2020/09/eclipse-with-cmake-project-on-windows/>Eclipse with CMake project on windows</a></h1><time class="has-text-grey-light is-size-7">12 September 2020</time><h1><a href=https://yairgd.github.io/2020/08/install-linux-on-microzed-board/>install linux on microzed board</a></h1><time class="has-text-grey-light is-size-7">1 August 2020</time></div></div><br><div class=card><div class=card-content><h1 class="title is-5">Related posts</h1><h1><a href=https://yairgd.github.io/2020/10/simple-openamp-application-for-stm32mp157/>Simple OpenAMP application for stm32mp157</a></h1><time class="has-text-grey-light is-size-7">25 October 2020</time><h1><a href=https://yairgd.github.io/2020/10/compile-linux-kernel-for-zynq/>Compile Linux kernel for zynq</a></h1><time class="has-text-grey-light is-size-7">17 October 2020</time><h1><a href=https://yairgd.github.io/2020/04/simple-hello-world-application-using-qt5-for-embedded-linux-device./>Simple Hello World application using qt5 for embedded Linux device.</a></h1><time class="has-text-grey-light is-size-7">1 April 2020</time><h1><a href=https://yairgd.github.io/2020/03/debug-linux-kernel-with-qemu/>Debug Linux Kernel With Qemu</a></h1><time class="has-text-grey-light is-size-7">18 March 2020</time><h1><a href=https://yairgd.github.io/2020/02/install-yocto-and-kernel-development-tools-of-imx8/>Install Yocto and kernel development tools of IMX8</a></h1><time class="has-text-grey-light is-size-7">24 February 2020</time><h1><a href=https://yairgd.github.io/2020/02/linux-char-device-to-handle-with-irq/>Linux char device to handle with IRQ</a></h1><time class="has-text-grey-light is-size-7">20 February 2020</time><h1><a href=https://yairgd.github.io/2020/02/linux-module-magic-info/>Linux module magic info</a></h1><time class="has-text-grey-light is-size-7">20 February 2020</time></div></div><br><div class=card><div class=card-content><h1 class="title is-5">Archives</h1><a href=https://yairgd.github.io/archives/2020>2020</a> (17)<br><a href=https://yairgd.github.io/archives/2014>2014</a> (4)<br></div></div></div></div></div></div><footer class="footer has-background-grey-darker has-text-white"><div class="content has-text-centered"><p><span class="icon is-large"><a href="https://m.facebook.com/yair.gadelov?ref=bookmarks" class=mysocial rel=me><i class="fab fa-facebook fa-3x"></i></a></span>&nbsp;&nbsp;
<span class="icon is-large"><a href=https://www.linkedin.com/mwlite/in/yair-gadelov-1972ab17/ class=mysocial rel=me><i class="fab fa-linkedin fa-3x"></i></a></span>&nbsp;&nbsp;
<span class="icon is-large"><a href=https://github.com/yairgd/ class=mysocial rel=me><i class="fab fa-github fa-3x"></i></a></span>&nbsp;&nbsp;<br><br>Copyright &copy; Yair Gadelov Tech Blog 2020 - Theme by <a href=https://jeffprod.com class=mysocial>JeffProd.com</a>
- <a class=mysocial href=https://yairgd.github.io/about>About</a><br></p></div></footer><script defer src=https://use.fontawesome.com/releases/v5.1.0/js/all.js></script></body></html>